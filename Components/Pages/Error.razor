@page "/Error"
@using System.Diagnostics

<PageTitle>Something went wrong</PageTitle>

<section class="error-page server-error">
    <h1>Oops!</h1>
    <p class="lead">Something went wrong while processing your request.</p>

    @if (ShowRequestId)
    {
        <p class="text-muted small">
            <strong>Request ID:</strong> <code>@RequestId</code>
        </p>
    }

    <p class="text-muted">
        If this keeps happening, please try again later.
    </p>

    <a class="btn btn-primary mt-2" href="/">Back to dashboard</a>
</section>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
